package podcast;

import java.net.MalformedURLException;
import java.util.concurrent.TimeUnit;
import org.testng.annotations.BeforeTest;
import org.testng.annotations.Test;
import Podcast_cap.cap_podcast;
import io.appium.java_client.android.AndroidDriver;
import io.appium.java_client.android.AndroidElement;

public class podcastTesting extends cap_podcast {

    public AndroidDriver<AndroidElement> driver;
    
    @BeforeTest
    public void bt() throws MalformedURLException {
        // Initialize the driver using the desired capabilities from cap_podcast class
        driver = cap();
        driver.manage().timeouts().implicitlyWait(15, TimeUnit.SECONDS);  // Set implicit wait for element detection
    }
    
    @Test
    public void openPodcastApp() {
        // Validate that the app has started
        System.out.println("Podcast App has been launched.");
        
        // Check if we are on the main activity by finding an element unique to the main screen
        String activityName = driver.currentActivity();
        if(activityName.equals("au.com.shiftyjelly.pocketcasts.ui.MainActivity")) {
            System.out.println("Podcast app opened successfully: " + activityName);
        } else {
            System.out.println("Failed to open Podcast app. Current activity: " + activityName);
        }
    }
}
